====================================================================================================
============================== MIGRATION INTELLIGENTE FINALE - SYGFP ===============================
====================================================================================================
Date: 2026-02-05 19:35:57

üîÑ √âTAPE 1/5 : R√©cup√©ration des donn√©es SQL Server...
====================================================================================================

üì¶ eARTI_DB2 (2021-2023)...
  ‚úì Notes: 1994
  ‚úì Engagements: 1294
  ‚úì Liquidations: 1160
  ‚úì Ordonnancements: 1030

üì¶ eARTIDB_2025 (2024-2025)...
  ‚úì Notes: 2660
  ‚úì Engagements: 1713
  ‚úì Liquidations: 1666
  ‚úì Ordonnancements: 1598

üì¶ eARTIDB_2026 (2026)...
  ‚úì Notes: 173
  ‚úì Engagements: 144
  ‚úì Liquidations: 134
  ‚úì Ordonnancements: 99

‚úÖ TOTAL SQL Server: 4827 notes, 3151 engagements, 2960 liquidations, 2727 ordonnancements

====================================================================================================
üîÑ √âTAPE 2/5 : Migration des Notes SEF...
====================================================================================================
  üìä 1,000 notes d√©j√† pr√©sentes
  ‚ö†Ô∏è  Erreur note ec8c9446-24c2-9af9-52f9-1a74a4146287: {'message': 'new row for relation "notes_sef" violates check constraint "notes_sef_statut_check"', 'code': '23514', 'hint': None, 'details': 'Failing row contains (ec8c9446-24c2-9af9-52f9-1a74a4146287, MIG-NOTE-2024-40127, 2024, null, null, SALAIRE JANVIER 2024, null, normale, null, validee, null, null, null, null, null, null, null, null, null, null, null, null, null, 2024-01-15 00:00:00+00, 2026-02-05 19:36:00.074076+00, null, null, null, null, null, null, t, null, null, null, f, null, null, null, 0, fonctionnement, null, null, null, null, null, null, null, null).'}
  ‚ö†Ô∏è  Erreur note d8209f2f-f56f-f0ce-19d7-b6ae86a5a286: {'message': 'new row for relation "notes_sef" violates check constraint "notes_sef_statut_check"', 'code': '23514', 'hint': None, 'details': 'Failing row contains (d8209f2f-f56f-f0ce-19d7-b6ae86a5a286, MIG-NOTE-2024-40128, 2024, null, null, ABONNEMENT DES ABONNES ARTI JANVIER 2024, null, normale, null, validee, null, null, null, null, null, null, null, null, null, null, null, null, null, 2024-01-15 00:00:00+00, 2026-02-05 19:36:00.348007+00, null, null, null, null, null, null, t, null, null, null, f, null, null, null, 0, fonctionnement, null, null, null, null, null, null, null, null).'}
  ‚ö†Ô∏è  Erreur note 0a72238d-f2cb-1629-bb43-b9647b4b3aa1: {'message': 'new row for relation "notes_sef" violates check constraint "notes_sef_statut_check"', 'code': '23514', 'hint': None, 'details': 'Failing row contains (0a72238d-f2cb-1629-bb43-b9647b4b3aa1, MIG-NOTE-2024-40129, 2024, null, null, CNPS DECEMBRE 2023, null, normale, null, validee, null, null, null, null, null, null, null, null, null, null, null, null, null, 2024-01-15 00:00:00+00, 2026-02-05 19:36:00.507581+00, null, null, null, null, null, null, t, null, null, null, f, null, null, null, 0, fonctionnement, null, null, null, null, null, null, null, null).'}
  ‚ö†Ô∏è  Erreur note 0c1485ee-82b5-8630-9a97-e42cb1a74051: {'message': 'new row for relation "notes_sef" violates check constraint "notes_sef_statut_check"', 'code': '23514', 'hint': None, 'details': 'Failing row contains (0c1485ee-82b5-8630-9a97-e42cb1a74051, MIG-NOTE-2024-40133, 2024, null, null, CONSOMMATION MOBILE ORANGE PERIODE DU 01/12 AU 31/12/2023 (MOIS ..., null, normale, null, validee, null, null, null, null, null, null, null, null, null, null, null, null, null, 2024-01-15 00:00:00+00, 2026-02-05 19:36:00.71704+00, null, null, null, null, null, null, t, null, null, null, f, null, null, null, 0, fonctionnement, null, null, null, null, null, null, null, null).'}
  ‚ö†Ô∏è  Erreur note 512b2477-f1ef-e95b-7460-f2ca936a2967: {'message': 'new row for relation "notes_sef" violates check constraint "notes_sef_statut_check"', 'code': '23514', 'hint': None, 'details': 'Failing row contains (512b2477-f1ef-e95b-7460-f2ca936a2967, MIG-NOTE-2024-40134, 2024, null, null, REGLEMENT FACTURE INTERNET ORANGE MOIS DE JANVIER 2024, null, normale, null, validee, null, null, null, null, null, null, null, null, null, null, null, null, null, 2024-01-15 00:00:00+00, 2026-02-05 19:36:00.902907+00, null, null, null, null, null, null, t, null, null, null, f, null, null, null, 0, fonctionnement, null, null, null, null, null, null, null, null).'}

‚úÖ Notes: 0 ins√©r√©es, 0 d√©j√† pr√©sentes, 4827 erreurs

====================================================================================================
üîÑ √âTAPE 3/5 : Migration des Engagements...
====================================================================================================
  üìä 1,000 engagements d√©j√† pr√©sents
  ‚ö†Ô∏è  Erreur engagement 652d7d91-5c92-97a5-478c-332d1f8b0cbe: {'message': 'duplicate key value violates unique constraint "budget_engagements_pkey"', 'code': '23505', 'hint': None, 'details': 'Key (id)=(652d7d91-5c92-97a5-478c-332d1f8b0cbe) already exists.'}
  ‚ö†Ô∏è  Erreur engagement 726de299-a52d-5d4b-6fc7-b012be7b93ec: {'message': 'duplicate key value violates unique constraint "budget_engagements_pkey"', 'code': '23505', 'hint': None, 'details': 'Key (id)=(726de299-a52d-5d4b-6fc7-b012be7b93ec) already exists.'}
  ‚ö†Ô∏è  Erreur engagement 9a2f0eb6-1fc3-324c-c684-c74062ad69f9: {'message': 'duplicate key value violates unique constraint "budget_engagements_pkey"', 'code': '23505', 'hint': None, 'details': 'Key (id)=(9a2f0eb6-1fc3-324c-c684-c74062ad69f9) already exists.'}
  ‚ö†Ô∏è  Erreur engagement 4124bf88-2e0a-2d6c-89bb-71de8cdafbcb: {'message': 'duplicate key value violates unique constraint "budget_engagements_pkey"', 'code': '23505', 'hint': None, 'details': 'Key (id)=(4124bf88-2e0a-2d6c-89bb-71de8cdafbcb) already exists.'}
  ‚ö†Ô∏è  Erreur engagement d8fbd12a-c333-b5ef-1861-4de5b2c409aa: {'message': 'duplicate key value violates unique constraint "budget_engagements_pkey"', 'code': '23505', 'hint': None, 'details': 'Key (id)=(d8fbd12a-c333-b5ef-1861-4de5b2c409aa) already exists.'}
  ‚úì 100 engagements ins√©r√©s...
  ‚úì 200 engagements ins√©r√©s...
  ‚úì 300 engagements ins√©r√©s...
  ‚úì 400 engagements ins√©r√©s...
  ‚úì 500 engagements ins√©r√©s...
  ‚úì 600 engagements ins√©r√©s...
  ‚úì 700 engagements ins√©r√©s...
  ‚úì 800 engagements ins√©r√©s...
  ‚úì 900 engagements ins√©r√©s...
  ‚úì 1,000 engagements ins√©r√©s...
  ‚úì 1,100 engagements ins√©r√©s...
  ‚úì 1,200 engagements ins√©r√©s...
  ‚úì 1,300 engagements ins√©r√©s...
  ‚úì 1,400 engagements ins√©r√©s...
  ‚úì 1,500 engagements ins√©r√©s...
  ‚úì 1,600 engagements ins√©r√©s...

‚úÖ Engagements: 1,662 ins√©r√©s, 375 d√©j√† pr√©sents, 1114 erreurs

====================================================================================================
üîÑ √âTAPE 4/5 : Migration des Liquidations (avec FK vers Engagements)...
====================================================================================================
  üìä 1,000 liquidations d√©j√† pr√©sentes
  ‚ö†Ô∏è  Erreur liquidation 1bf165c0-2319-4e19-823b-c489914ea2d6: {'message': 'new row for relation "budget_liquidations" violates check constraint "budget_liquidations_statut_check"', 'code': '23514', 'hint': None, 'details': 'Failing row contains (1bf165c0-2319-4e19-823b-c489914ea2d6, 33c6214d-b215-33e9-fa72-da646278ab09, LIQ-2026-3633, 0.0, 2024-02-26, validee, null, 2026-02-05 19:58:32.329525+00, 0, 18, 0, 0, 0, 0, 0, 0, f, null, null, reel, null, null, null, null, f, 2024, null, null, en_attente, 0, null, null, null, null, null, null, f, null, null, null, f, null, null, null).'}
